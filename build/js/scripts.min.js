!function(){const e=document.body,t=document.querySelector(".main-navigation"),s=t.querySelector(".main-navigation__toggle"),a=t.querySelectorAll(".main-navigation__link"),l=document.querySelectorAll(".places-visit__link"),o=document.querySelector(".countries__slider"),n=o.querySelectorAll(".countries__slider-button"),r=o.querySelectorAll(".countries__slider-item"),c=document.querySelector(".questions__form"),i=c.querySelector(".questions__input--tel"),d=c.querySelector(".questions__input--email"),u=c.querySelector(".button--questions"),v=document.querySelector(".modal-buy"),m=v.querySelector(".modal-buy__close"),_=document.querySelector(".modal-success"),y=_.querySelector(".modal-success__close"),L=v.querySelector(".modal-buy__form"),g=L.querySelector(".modal-buy__input--tel"),p=L.querySelector(".modal-buy__input--email"),b=L.querySelector(".button--modal-buy"),E=document.querySelector(".button--travel-europe"),h=document.querySelectorAll("[data-buy]"),S=()=>{t.classList.add("main-navigation--closed"),t.classList.remove("main-navigation--opened"),e.classList.remove("page-body--no-scroll")};t&&(t.classList.remove("main-navigation--nojs"),s.addEventListener("click",(()=>{if(t.classList.contains("main-navigation--closed"))return t.classList.remove("main-navigation--closed"),t.classList.add("main-navigation--opened"),void e.classList.add("page-body--no-scroll");S()})));const q=e=>{const t=e.getAttribute("href").substring(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};t&&a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),q(e.target),t.classList.contains("main-navigation--opened")&&S()}))})),E&&E.addEventListener("click",(e=>{e.preventDefault(),q(e.target)}));const f=(e,t)=>{r.forEach((e=>{e.classList.contains("countries__slider-item--current")&&e.classList.remove("countries__slider-item--current")})),n.forEach((e=>{e.classList.contains("countries__slider-button--current")&&e.classList.remove("countries__slider-button--current")})),e.classList.add("countries__slider-item--current"),t.classList.add("countries__slider-button--current")};o&&(o.classList.remove("countries__slider--nojs"),n.forEach(((e,t)=>{e.addEventListener("click",(()=>{f(r[t],e)}))})));l&&o&&l.forEach(((e,t)=>{e.addEventListener("click",(s=>{s.preventDefault(),((e,t,s)=>{l.forEach((e=>{e.classList.contains("places-visit__link--curent")&&e.classList.remove("places-visit__link--curent")})),t.classList.add("places-visit__link--curent"),f(e,s),q(t)})(r[t],e,n[t])}))}));let k=!0,w="",D="";const A=(e,t)=>{try{w=localStorage.getItem("tel"),D=localStorage.getItem("email")}catch(e){k=!1}(w||D)&&(e.value=w||"",t.value=D||"")};i&&d&&A(i,d);const I=()=>{v.classList.contains("modal-buy__show-overlay")&&(v.classList.remove("modal-buy__show-overlay"),A(i,d)),_.classList.contains("modal-success__show-overlay")&&_.classList.remove("modal-success__show-overlay"),e.classList.remove("page-body--no-scroll")},C=e=>{e.target.matches("section")&&(e.stopPropagation(),I())},V=e=>{e.preventDefault(),I()};v&&(v.addEventListener("click",C),m.addEventListener("click",V)),_&&(_.addEventListener("click",C),y.addEventListener("click",V));const $=e=>{27===e.keyCode&&(e.preventDefault(),I(),document.removeEventListener("keydown",$))};h&&h.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),v.classList.add("modal-buy__show-overlay"),e.classList.add("page-body--no-scroll"),g.focus(),A(g,p),document.addEventListener("keydown",$)}))})),c&&c.addEventListener("submit",(t=>{i.value&&d.value?(_.classList.add("modal-success__show-overlay"),e.classList.add("page-body--no-scroll"),document.addEventListener("keydown",$),k&&(localStorage.setItem("tel",i.value),localStorage.setItem("email",d.value))):t.preventDefault()})),L&&L.addEventListener("submit",(e=>{g.value&&p.value?(_.classList.add("modal-success__show-overlay"),k&&(localStorage.setItem("tel",g.value),localStorage.setItem("email",p.value)),v.classList.remove("modal-buy__show-overlay")):e.preventDefault()}));const j=e=>{const t=e.key,s="+7 (___) ___-__-__",a=s.replace(/\D/g,""),l=e.target.value.replace(/\D/g,"");let o=0,n=s.replace(/[_\d]/g,(e=>o<l.length?l.charAt(o++)||a.charAt(o):e));o=n.indexOf("_"),-1!==o&&(n=n.slice(0,o));let r=s.substring(0,e.target.value.length).replace(/_+/g,(e=>`\\d{1,${e.length}}`)).replace(/[+()]/g,"\\$&");r=new RegExp(`^${r}$`),(!r.test(e.target.value)||e.target.value.length<5||t>47&&t<58)&&(e.target.value=n),"blur"===e.type&&e.target.value.length<5&&(e.target.value="")};c&&(i.addEventListener("input",j),i.addEventListener("focus",j),i.addEventListener("blur",j)),L&&(g.addEventListener("input",j),g.addEventListener("focus",j),g.addEventListener("blur",j));const x=e=>{e.validity.tooShort?e.setCustomValidity(" Введите 10 цифр номера"):e.validity.valueMissing?e.setCustomValidity("Обязательное поле"):e.setCustomValidity("")};c&&u.addEventListener("click",(()=>{x(i)})),L&&b.addEventListener("click",(()=>{x(g)}))}();