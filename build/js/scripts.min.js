!function(){const e=document.body,t=document.querySelector(".main-navigation"),s=t.querySelector(".main-navigation__toggle"),a=t.querySelectorAll(".main-navigation__link"),l=document.querySelectorAll(".places-visit__link"),o=document.querySelector(".countries__slider"),n=o.querySelectorAll(".countries__slider-button"),i=o.querySelectorAll(".countries__slider-item"),r=document.querySelector(".questions__form"),c=r.querySelector(".questions__input--tel"),u=r.querySelector(".questions__input--email"),d=r.querySelector(".button--questions"),v=document.querySelector(".modal-buy"),m=v.querySelector(".modal-buy__close"),_=document.querySelector(".modal-success"),y=_.querySelector(".modal-success__close"),L=v.querySelector(".modal-buy__form"),g=L.querySelector(".modal-buy__input--tel"),b=L.querySelector(".modal-buy__input--email"),E=L.querySelector(".button--modal-buy"),p=document.querySelector(".button--travel-europe"),S=document.querySelectorAll("[data-buy]"),h=()=>{t.classList.add("main-navigation--closed"),t.classList.remove("main-navigation--opened"),e.classList.remove("page-body--no-scroll")};t&&(t.classList.remove("main-navigation--nojs"),s.addEventListener("click",(()=>{if(t.classList.contains("main-navigation--closed"))return t.classList.remove("main-navigation--closed"),t.classList.add("main-navigation--opened"),void e.classList.add("page-body--no-scroll");h()})));const q=e=>{const t=e.getAttribute("href").substring(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};t&&a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),q(e.target),t.classList.contains("main-navigation--opened")&&h()}))})),p&&p.addEventListener("click",(e=>{e.preventDefault(),q(e.target)}));const f=(e,t)=>{i.forEach((e=>{e.classList.contains("countries__slider-item--current")&&e.classList.remove("countries__slider-item--current")})),n.forEach((e=>{e.classList.contains("countries__slider-button--current")&&e.classList.remove("countries__slider-button--current")})),e.classList.add("countries__slider-item--current"),t.classList.add("countries__slider-button--current")};o&&(o.classList.remove("countries__slider--nojs"),n.forEach(((e,t)=>{e.addEventListener("click",(()=>{f(i[t],e)}))})));l&&o&&l.forEach(((e,t)=>{e.addEventListener("click",(s=>{s.preventDefault(),((e,t,s)=>{l.forEach((e=>{e.classList.contains("places-visit__link--curent")&&e.classList.remove("places-visit__link--curent")})),t.classList.add("places-visit__link--curent"),f(e,s),q(t)})(i[t],e,n[t])}))}));let k=!0,w="",D="";const I=(e,t)=>{try{w=localStorage.getItem("tel"),D=localStorage.getItem("email")}catch(e){k=!1}(w||D)&&(e.value=w||"",t.value=D||"")};c&&u&&I(c,u);const A=()=>{v.classList.contains("modal-buy__show-overlay")&&v.classList.remove("modal-buy__show-overlay"),_.classList.contains("modal-success__show-overlay")&&_.classList.remove("modal-success__show-overlay"),I(c,u),e.classList.remove("page-body--no-scroll")},C=e=>{e.target.matches("section")&&(e.stopPropagation(),A())},V=e=>{e.preventDefault(),A()};v&&(v.addEventListener("click",C),m.addEventListener("click",V)),_&&(_.addEventListener("click",C),y.addEventListener("click",V));const $=e=>{27===e.keyCode&&(e.preventDefault(),A(),document.removeEventListener("keydown",$))};S&&S.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),v.classList.add("modal-buy__show-overlay"),e.classList.add("page-body--no-scroll"),g.focus(),I(g,b),document.addEventListener("keydown",$)}))})),r&&r.addEventListener("submit",(t=>{c.value&&u.value?(_.classList.add("modal-success__show-overlay"),e.classList.add("page-body--no-scroll"),document.addEventListener("keydown",$),k&&(localStorage.setItem("tel",c.value),localStorage.setItem("email",u.value))):t.preventDefault()})),L&&L.addEventListener("submit",(e=>{g.value&&b.value?(_.classList.add("modal-success__show-overlay"),k&&(localStorage.setItem("tel",g.value),localStorage.setItem("email",b.value)),v.classList.remove("modal-buy__show-overlay")):e.preventDefault()}));const j=e=>e.target.value="+7 ",B=e=>{e.target.value.length<4&&(e.target.value="")},M=e=>{const t=e.target,s=(e=>e.value.replace(/\D/g,""))(t);let a="+7 ";if(!s)return t.value="";const l=t.selectionStart;t.value.length===l?(s.length>1&&(a+=`(${s.substring(1,4)}`),s.length>=5&&(a+=`) ${s.substring(4,7)}`),s.length>=8&&(a+=`-${s.substring(7,9)}`),s.length>=10&&(a+=`-${s.substring(9,11)}`),t.value=a):e.data&&/\D/g.test(e.data)&&(t.value=s)};r&&(c.addEventListener("input",M),c.addEventListener("focus",j),c.addEventListener("blur",B)),L&&(g.addEventListener("input",M),g.addEventListener("focus",j),g.addEventListener("blur",B));const P=e=>{e.validity.tooShort?e.setCustomValidity(" Введите 10 цифр номера"):e.validity.valueMissing?e.setCustomValidity("Обязательное поле"):e.setCustomValidity("")};r&&d.addEventListener("click",(()=>{P(c)})),L&&E.addEventListener("click",(()=>{P(g)}))}();