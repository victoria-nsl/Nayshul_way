"use strict";const MASKED="+7 (___) ___-__-__",body=document.body,navigationMain=document.querySelector(".main-navigation"),navigationToggle=navigationMain.querySelector(".main-navigation__toggle"),linksNavigationMain=navigationMain.querySelectorAll(".main-navigation__link"),linksSlide=document.querySelectorAll(".places-visit__link"),buttonsSlide=document.querySelectorAll(".countries__slider-button"),sliderListCountries=document.querySelector(".countries__slider-list"),imagesSlide=sliderListCountries.querySelectorAll(".countries__slider-item"),pricesList=document.querySelector(".prices__list"),formQuestions=document.querySelector(".questions__form"),inputTelQuestions=formQuestions.querySelector(".questions__input--tel"),inputEmailQuestions=formQuestions.querySelector(".questions__input--email"),buttonQuestions=formQuestions.querySelector(".button--questions"),overlayPopupBuy=document.querySelector(".modal-buy"),popupBuy=overlayPopupBuy.querySelector(".modal-buy__card"),buttonPopupBuyClose=popupBuy.querySelector(".modal-buy__close"),overlayPopupSuccess=document.querySelector(".modal-success"),popupSuccess=overlayPopupSuccess.querySelector(".modal-success__card"),buttonPopupSuccessClose=popupSuccess.querySelector(".modal-success__close"),formBuy=popupBuy.querySelector(".modal-buy__form"),inputTelModal=formBuy.querySelector(".modal-buy__input--tel"),inputEmailModal=formBuy.querySelector(".modal-buy__input--email"),buttonModal=formQuestions.querySelector(".button--modal-buy"),buttonWatchTour=document.querySelector(".button--travel-europe"),buttonsBuy=document.querySelectorAll("[data-buy]"),scrollSmoothly=e=>{const t=e.getAttribute("href").substring(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};linksNavigationMain.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),scrollSmoothly(e.target),navigationMain.classList.contains("main-navigation--opened")&&closeMenu()}))})),buttonWatchTour.addEventListener("click",(e=>{e.preventDefault(),scrollSmoothly(e.target)})),navigationMain.classList.remove("main-navigation--nojs");const closeMenu=()=>{navigationMain.classList.add("main-navigation--closed"),navigationMain.classList.remove("main-navigation--opened"),body.classList.remove("page-body--no-scroll")},openMenu=()=>{navigationMain.classList.remove("main-navigation--closed"),navigationMain.classList.add("main-navigation--opened"),body.classList.add("page-body--no-scroll")};navigationToggle.addEventListener("click",(()=>{if(navigationMain.classList.contains("main-navigation--closed"))return navigationMain.classList.remove("main-navigation--closed"),navigationMain.classList.add("main-navigation--opened"),void body.classList.add("page-body--no-scroll");closeMenu()}));const showSlide=(e,t)=>{imagesSlide.forEach((e=>{e.classList.contains("countries__slider-item--current")&&e.classList.remove("countries__slider-item--current")})),linksSlide.forEach((e=>{e.classList.contains("places-visit__link--curent")&&e.classList.remove("places-visit__link--curent")})),e.classList.add("countries__slider-item--current"),t.classList.add("places-visit__link--curent"),scrollSmoothly(t)};linksSlide.forEach(((e,t)=>{e.addEventListener("click",(s=>{s.preventDefault(),showSlide(imagesSlide[t],e)}))})),sliderListCountries.classList.remove("countries__slider-list--nojs");const changeSlide=(e,t)=>{imagesSlide.forEach((e=>{e.classList.contains("countries__slider-item--current")&&e.classList.remove("countries__slider-item--current")})),buttonsSlide.forEach((e=>{e.classList.contains("countries__slider-button--current")&&e.classList.remove("countries__slider-button--current")})),e.classList.add("countries__slider-item--current"),t.classList.add("countries__slider-button--current")};buttonsSlide.forEach(((e,t)=>{e.addEventListener("click",(()=>{changeSlide(imagesSlide[t],e)}))}));let isStorageSupport=!0,storageTel="",storageEmail="";const setItemLocalStorage=(e,t)=>{try{storageTel=localStorage.getItem("tel"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}(storageTel||storageEmail)&&(e.value=storageTel||"",t.value=storageEmail||"")};setItemLocalStorage(inputTelQuestions,inputEmailQuestions);const openPopup=()=>{popupBuy.classList.add("modal-buy__show-card"),overlayPopupBuy.classList.add("modal-buy__show-overlay"),body.classList.add("page-body--no-scroll"),inputTelModal.focus(),setItemLocalStorage(inputTelModal,inputEmailModal)};buttonsBuy.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),popupBuy.classList.add("modal-buy__show-card"),overlayPopupBuy.classList.add("modal-buy__show-overlay"),body.classList.add("page-body--no-scroll"),inputTelModal.focus(),setItemLocalStorage(inputTelModal,inputEmailModal)}))}));const closePopup=()=>{popupBuy.classList.contains("modal-buy__show-card")&&popupBuy.classList.remove("modal-buy__show-card"),popupSuccess.classList.contains("modal-success__show-card")&&popupSuccess.classList.remove("modal-success__show-card"),overlayPopupBuy.classList.contains("modal-buy__show-overlay")&&(overlayPopupBuy.classList.remove("modal-buy__show-overlay"),body.classList.remove("page-body--no-scroll")),overlayPopupSuccess.classList.contains("modal-success__show-overlay")&&(overlayPopupSuccess.classList.remove("modal-success__show-overlay"),body.classList.remove("page-body--no-scroll")),setItemLocalStorage(inputTelQuestions,inputEmailQuestions)},onButtonCloseClick=e=>{e.preventDefault(),closePopup()};buttonPopupBuyClose.addEventListener("click",onButtonCloseClick),buttonPopupSuccessClose.addEventListener("click",onButtonCloseClick);const onDocumentEscKeydown=e=>{27===e.keyCode&&(e.preventDefault(),closePopup())};document.addEventListener("keydown",onDocumentEscKeydown);const onOverlayClick=e=>{e.target.matches("section")&&(e.stopPropagation(),closePopup())};overlayPopupBuy.addEventListener("click",onOverlayClick),overlayPopupSuccess.addEventListener("click",onOverlayClick),formQuestions.addEventListener("submit",(e=>{inputTelQuestions.value&&inputEmailQuestions.value?(popupSuccess.classList.add("modal-success__show-card"),overlayPopupSuccess.classList.add("modal-success__show-overlay"),body.classList.add("page-body--no-scroll"),isStorageSupport&&(localStorage.setItem("tel",inputTelQuestions.value),localStorage.setItem("email",inputEmailQuestions.value))):e.preventDefault()})),formBuy.addEventListener("submit",(e=>{inputTelModal.value&&inputEmailModal.value?(popupSuccess.classList.add("modal-success__show-card"),overlayPopupSuccess.classList.add("modal-success__show-overlay"),popupBuy.classList.remove("modal-buy__show-card"),overlayPopupBuy.classList.remove("modal-buy__show-overlay"),isStorageSupport&&(localStorage.setItem("tel",inputTelModal.value),localStorage.setItem("email",inputEmailModal.value))):e.preventDefault()}));const checkMask=e=>{const t=e.key,s=MASKED,o=s.replace(/\D/g,""),a=e.target.value.replace(/\D/g,"");let l=0,i=s.replace(/[_\d]/g,(e=>l<a.length?a.charAt(l++)||o.charAt(l):e));l=i.indexOf("_"),-1!==l&&(i=i.slice(0,l));let n=s.substring(0,e.target.value.length).replace(/_+/g,(e=>`\\d{1,${e.length}}`)).replace(/[+()]/g,"\\$&");n=new RegExp(`^${n}$`),(!n.test(e.target.value)||e.target.value.length<5||t>47&&t<58)&&(e.target.value=i),"blur"===e.type&&e.target.value.length<5&&(e.target.value="")};inputTelQuestions.addEventListener("input",checkMask),inputTelQuestions.addEventListener("focus",checkMask),inputTelQuestions.addEventListener("blur",checkMask),inputTelModal.addEventListener("input",checkMask),inputTelModal.addEventListener("focus",checkMask),inputTelModal.addEventListener("blur",checkMask);const showError=e=>{e.validity.tooShort?e.setCustomValidity(" Введите 10 цифр номера"):e.validity.valueMissing?e.setCustomValidity("Обязательное поле"):e.setCustomValidity("")};buttonQuestions.addEventListener("click",(()=>{showError(inputTelQuestions)})),buttonModal.addEventListener("click",(()=>{showError(inputTelQuestions)}));