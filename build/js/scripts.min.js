!function(){const e=document.body,t=document.querySelector(".main-navigation"),s=t.querySelector(".main-navigation__toggle"),a=t.querySelectorAll(".main-navigation__link"),l=document.querySelectorAll(".places-visit__link"),n=document.querySelector(".countries__slider"),o=n.querySelectorAll(".countries__slider-button"),r=n.querySelectorAll(".countries__slider-item"),i=document.querySelector(".questions__form"),c=i.querySelector(".questions__input--tel"),u=i.querySelector(".questions__input--email"),d=i.querySelector(".button--questions"),v=document.querySelector(".modal-buy"),m=v.querySelector(".modal-buy__close"),_=document.querySelector(".modal-success"),L=_.querySelector(".modal-success__close"),g=v.querySelector(".modal-buy__form"),y=g.querySelector(".modal-buy__input--tel"),p=g.querySelector(".modal-buy__input--email"),b=g.querySelector(".button--modal-buy"),E=document.querySelector(".button--travel-europe"),h=document.querySelectorAll("[data-buy]"),S=()=>{t.classList.add("main-navigation--closed"),t.classList.remove("main-navigation--opened"),e.classList.remove("page-body--no-scroll")};t&&(t.classList.remove("main-navigation--nojs"),s.addEventListener("click",(()=>{if(t.classList.contains("main-navigation--closed"))return t.classList.remove("main-navigation--closed"),t.classList.add("main-navigation--opened"),void e.classList.add("page-body--no-scroll");S()})));const q=e=>{const t=e.getAttribute("href").substring(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};t&&a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),q(e.target),t.classList.contains("main-navigation--opened")&&S()}))})),E&&E.addEventListener("click",(e=>{e.preventDefault(),q(e.target)}));const f=(e,t)=>{r.forEach((e=>{e.classList.contains("countries__slider-item--current")&&e.classList.remove("countries__slider-item--current")})),o.forEach((e=>{e.classList.contains("countries__slider-button--current")&&e.classList.remove("countries__slider-button--current")})),e.classList.add("countries__slider-item--current"),t.classList.add("countries__slider-button--current")};n&&(n.classList.remove("countries__slider--nojs"),o.forEach(((e,t)=>{e.addEventListener("click",(()=>{f(r[t],e)}))})));l&&n&&l.forEach(((e,t)=>{e.addEventListener("click",(s=>{s.preventDefault(),((e,t,s)=>{l.forEach((e=>{e.classList.contains("places-visit__link--curent")&&e.classList.remove("places-visit__link--curent")})),t.classList.add("places-visit__link--curent"),f(e,s),q(t)})(r[t],e,o[t])}))}));let k=!0,w="",D="";const I=(e,t)=>{try{w=localStorage.getItem("tel"),D=localStorage.getItem("email")}catch(e){k=!1}(w||D)&&(e.value=w||"",t.value=D||"")};c&&u&&I(c,u);const A=()=>{v.classList.contains("modal-buy__show-overlay")&&v.classList.remove("modal-buy__show-overlay"),_.classList.contains("modal-success__show-overlay")&&_.classList.remove("modal-success__show-overlay"),I(c,u),e.classList.remove("page-body--no-scroll")},$=e=>{e.target.matches("section")&&(e.stopPropagation(),A())},C=e=>{e.preventDefault(),A()};v&&(v.addEventListener("click",$),m.addEventListener("click",C)),_&&(_.addEventListener("click",$),L.addEventListener("click",C));const V=e=>{27===e.keyCode&&(e.preventDefault(),A(),document.removeEventListener("keydown",V))};h&&h.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),v.classList.add("modal-buy__show-overlay"),e.classList.add("page-body--no-scroll"),y.focus(),I(y,p),document.addEventListener("keydown",V)}))}));const j=(e,t)=>{e.value.length<18?(e.setCustomValidity(" Введите 10 цифр номера"),e.classList.add("page-main__input-error")):(e.setCustomValidity(""),e.classList.remove("page-main__input-error")),t.validity.valid?t.classList.remove("page-main__input-error"):t.classList.add("page-main__input-error")};i&&d.addEventListener("click",(()=>{j(c,u)})),g&&b.addEventListener("click",(()=>{j(y,p)})),i&&i.addEventListener("submit",(t=>{c.value.length<18||!u.value?t.preventDefault():(_.classList.add("modal-success__show-overlay"),e.classList.add("page-body--no-scroll"),document.addEventListener("keydown",V),k&&(localStorage.setItem("tel",c.value),localStorage.setItem("email",u.value)))})),g&&g.addEventListener("submit",(e=>{y.value.length<18||!p.value?e.preventDefault():(_.classList.add("modal-success__show-overlay"),k&&(localStorage.setItem("tel",y.value),localStorage.setItem("email",p.value)),v.classList.remove("modal-buy__show-overlay"))}));const B=e=>e.target.value="+7 ",P=e=>{e.target.value.length<4&&(e.target.value="")},x=e=>{const t=e.target,s=(e=>e.value.replace(/\D/g,""))(t);let a="+7 ";if(!s)return t.value="";const l=t.selectionStart;t.value.length===l?(s.length>1&&(a+=`(${s.substring(1,4)}`),s.length>=5&&(a+=`) ${s.substring(4,7)}`),s.length>=8&&(a+=`-${s.substring(7,9)}`),s.length>=10&&(a+=`-${s.substring(9,11)}`),t.value=a):e.data&&/\D/g.test(e.data)&&(t.value=s)};i&&(c.addEventListener("input",x),c.addEventListener("focus",B),c.addEventListener("blur",P)),g&&(y.addEventListener("input",x),y.addEventListener("focus",B),y.addEventListener("blur",P))}();